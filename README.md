# Lucky devil ("Who Wants to Be a Millionare?")

###### Ruby: `3.0.3` Rails: `6.1.6` Yarn: `3.2.4` Node: `17.1.0` Nodejs: `12.22.9` Language: `Russian`
###### Скриншоты приложения находятся в корневой директории "screenshots"
![Снимок экрана от 2022-12-14 19-37-53](https://user-images.githubusercontent.com/102049907/207656293-c4c53e8b-a22c-4c9d-8bf7-17a7e9081b29.png)


### Описание:

[Ruby on Rails](https://rubyonrails.org/) версия всемирно известной игры [Кто хочет стать миллионером?](https://ru.wikipedia.org/wiki/Кто_хочет_стать_миллионером).

- **15 вопросов**
- **15 уровней сложности**
- **4 подсказки**
  - 50:50
  - звонок другу
  - помощь аудитории
  - замена вопроса
- **3 несгораемые суммы**
  - `1 000`
  - `32 000`
  - `1 000 000`
- **без права на ошибку**

Вся логика, связанная с аутентификацией, регистрацией, созданием и изменением пароля
выполнена с помощью [`devise`](https://github.com/heartcombo/devise)

Восстановить пароль от учетной записи можно с помощью электронной почты (использовано 
решение [`letter_opener`](https://github.com/ryanb/letter_opener)).

Приложение покрыто тестами с использованием: `RSpec` `Capybara` `factory-bot`

Пользователи со статусом `admin` могут загружать вопросы (использовано решение [`rails_admin`](https://github.com/railsadminteam/rails_admin))

Выполнена миграция с `Webpacker` на `ESBuild`



### Установка:
1. Клонируйте репозиторий
```
$ git clone git@github.com:ProfessorNemo/lucky_devil.git
```

2. Установите библиотеки
```
$ bundle
```

3. Создайте базу данных, запустите миграции, а также установите все зависимости в файле `package.json`
```
$ make initially
```

4. Загрузите тестовые вопросы
(только если не собираетесь загружать потом другие, реальные вопросы!)
```
$ rails db:seed
```

5. Запустите сервер
```
$ bin/dev
```

Откройте `localhost:3000` в браузере.

### Команда для запуска всех тестов:

Перед запуском тестов в консоли  введите следующие команды:
```
$ rails db:environment:set RAILS_ENV=test
$ rake db:schema:load RAILS_ENV=test
```
затем
```
$ make rspec
```

### Получить статус администратора:

Run Rails console
```
$ make c
```

Найдите `id` пользователя по `name`
```ruby
> User.pluck(:id, :name)
# => [[1, "Glebchik"]]
```
Найдите `User` по `id` и установите для атрибута `is_admin` значение `true`.
```ruby
> User.find(1).update(is_admin: true)
```

Панель администратора теперь доступна. Теперь у вас будут права администратора на
загрузку вопросов, удаление, редактирование пользователей и т.д. Файлы с
вопросами всех уровней сложности хранятся в директории "db/questions". Для того, чтобы запустить
игру в полноценной реализации, необходимо подготовить 15 файлов с вопросами разного
уровня сложности (от 0 до 14-го) и загрузить их в базу.
Каждая непустая строка файла должна выглядеть так:

Текст вопроса?|Правильный ответ|Ответ 2|Ответ 3|Ответ 4
